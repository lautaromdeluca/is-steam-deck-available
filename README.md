# Steam Deck Refurbished Availability Checker

A Go application packaged with Docker that monitors the Steam store for the availability of a specific refurbished Steam Deck model (currently configured for 512GB OLED) and sends a notification via Telegram when it becomes available.

It uses a headless browser (`chromedp`) to properly render the page content generated by JavaScript before checking availability.

## Features

* Monitors the official Steam store refurbished page using a headless browser (`chromedp`).
* Targets a specific Steam Deck model (configurable via constants in `main.go`).
* Sends notifications via Telegram Bot API when the target item is available.
* Packaged as a Docker container for easy deployment and background running.
* Managed via `docker-compose` for simple configuration and execution.
* Includes log filtering to reduce noise from underlying browser events.

## Prerequisites

* Go (version 1.23.4+ recommended, primarily for development/building if not using Docker directly).
* Docker Engine.
* Docker Compose (v2+ recommended).
* A Telegram Bot Token and a destination Chat ID.

## Setup & Configuration

1. **Get the Code:** Clone this repository or download the project files (`main.go`, `Dockerfile`, `docker-compose.yml`, etc.).

2. **Get Telegram Credentials:** Ensure you have your Telegram **Bot Token** and the target **Chat ID** (either your personal ID or a group ID) ready.

3. **Create Environment File:**
    * In the root directory of the project, create a file named `.env`.
    * Add your Telegram credentials to this file:

        ```.env
        # Contents of .env file
        TG_TOKEN=YOUR_ACTUAL_BOT_TOKEN_HERE
        TG_CHAT_ID=YOUR_ACTUAL_CHAT_ID_HERE
        ```

    * Replace the placeholders with your real token and chat ID.

4. **(Optional but Recommended) Verify Configuration in `main.go`:**
    * Open `main.go`.
    * Adjust `checkInterval` if you want to check more or less frequently (e.g., `10 * time.Minute`).

## Usage (with Docker Compose)

1. **Navigate:** Open a terminal or command prompt in the project's root directory.
2. **Build & Start:** Run the following command. This will build the Docker image based on the `Dockerfile` (if it's not already built or if changes were made) and start the container in the background (detached mode). It automatically reads the `.env` file.

    ```bash
    docker-compose up -d
    ```

3. **Check Logs:** To see the output of the checker (including status updates or potential errors):

    ```bash
    docker-compose logs -f
    ```

    *(Press `Ctrl+C` to stop following the logs)*
4. **Stop & Remove:** To stop the checker and remove the container and associated network:

    ```bash
    docker-compose down
    ```

5. **Force Rebuild:** If you modify `main.go` or `Dockerfile`, force a rebuild before starting:

    ```bash
    docker-compose build
    docker-compose up -d
    ```

## Important Notes & Disclaimer

* **Website Changes:** This scraper relies on specific HTML structure and CSS selectors found on the Steam store page. **If Valve updates their website, the scraper will likely break.** You will need to re-analyze the page (potentially using the debugging steps involving saving the HTML) and update the CSS selector constants (`itemContainerSelector`, `itemCardSelector`, `availabilityTextSelector`) in `main.go`.
* **Resource Usage:** Running a headless browser (Chromium) within the container can consume significant RAM and CPU resources, especially during the page load and rendering phase. Ensure the machine running the Docker container has sufficient resources. Free hosting tiers might have limitations.
* **Responsible Use:** Use a reasonable `checkInterval`. Checking too frequently (e.g., every few seconds) provides little benefit and could lead to your IP being blocked by Steam or put unnecessary load on their servers. Please use responsibly.

## Customization

* **Target Item:** Change the `targetItemText` constant in `main.go`.
* **Check Frequency:** Change the `checkInterval` constant in `main.go`.
* **Selectors:** Modify the CSS selector constants (`itemContainerSelector`, `itemCardSelector`, `availabilityTextSelector`) in `main.go` if the Steam page structure changes.
